<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, viewport-fit=cover">
    <title>LAB</title>
    <style>
        * { box-sizing: border-box;}
        html {
            width: 100%;
            height: 100%;
        }

        body {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding: 0;
            margin: 0;
            overflow: hidden;
        }

        .test-circle {
            width: 288px;
            height: 288px;
            border-radius: 50%;
            background: #fff;
            position: relative;
            margin-bottom: 16px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .test-circle:after {
            content: '';
            display: block;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translateX(-50%) translateY(-50%);
            background: #fff;
            box-shadow: inset 0 4px 8px rgba(0,0,0,0.3);
        }

        .test-circle .piece {
            width: 0;
            height: 96px;
            position: absolute;
            left: 50%;
            bottom: 50%;
            transform-origin: 50% 100%;
        }

        .test-circle .piece:nth-of-type(1) { transform: rotate(0deg);}
        .test-circle .piece:nth-of-type(2) { transform: rotate(45deg);}
        .test-circle .piece:nth-of-type(3) { transform: rotate(90deg);}
        .test-circle .piece:nth-of-type(4) { transform: rotate(135deg);}
        .test-circle .piece:nth-of-type(5) { transform: rotate(180deg);}
        .test-circle .piece:nth-of-type(6) { transform: rotate(225deg);}
        .test-circle .piece:nth-of-type(7) { transform: rotate(270deg);}
        .test-circle .piece:nth-of-type(8) { transform: rotate(315deg);}

        .test-circle .piece .btn {
            width: 56px;
            height: 56px;
            background: transparent;
            position: absolute;
            top: 0;
            left: 50%;
            transform-origin: 50%;
            transform: translateX(-50%) translateY(-50%);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .test-circle .piece .btn p {
            margin: 0;
            text-align: center;
            font-size: 11px;
            font-weight: 700;
            line-height: 20px;
            color: #2a3138;
            transition: all 0.2s;
        }

        .test-circle .piece .btn svg { width: 32px; height: 32px;}
        .test-circle .piece .btn svg path { fill: #2a3138; transition: all 0.2s; }
        .test-circle .piece .btn.act svg path { fill: #fe6a2b; }
        .test-circle .piece .btn.act p { color: #fe6a2b; }
    </style>
</head>
<body>
    <div id="pointer" class="test-circle">
        <div class="piece">
            <div class="btn">
                <svg x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path d="M29.7,6c0.8,0,1.5,0.7,1.5,1.5v2.6c8.4,0.8,15,7.8,15,16.4v11.4l4.1,4.1c1,1,1.3,2.5,0.8,3.8c-0.5,1.3-1.8,2.2-3.2,2.2H37.1
                	c-0.3,3.9-3.5,7-7.5,7c-4,0-7.2-3.1-7.5-7H11.5c-1.4,0-2.7-0.9-3.2-2.2C7.7,44.5,8,43,9,42l4.1-4.1V26.5c0-8.6,6.6-15.7,15-16.4V7.5
                	C28.2,6.7,28.8,6,29.7,6z M34.1,48h-8.9c0.3,2.2,2.1,4,4.5,4S33.9,50.2,34.1,48z M29.7,13c-7.4,0-13.5,6.1-13.5,13.5v12.6l-5,5
                	C11,44.3,11,44.5,11,44.7c0.1,0.2,0.3,0.3,0.5,0.3h36.3c0.2,0,0.4-0.1,0.5-0.3c0.1-0.2,0-0.4-0.1-0.5l-5-5V26.5
                	C43.2,19.1,37.1,13,29.7,13L29.7,13z"/>
                </svg>
                <p>알림</p>
            </div>
        </div>
        <div class="piece">
            <div class="btn">
                <svg x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path d="M49.1,41.1c1.2-1.7,2-3.7,2-5.9c0-5.5-4.5-10-10-10c0,0,0,0,0,0V10h-9.1c-0.4-1.7-2-3-3.8-3H18
                	c-1.9,0-3.4,1.3-3.8,3H5v43h36v-7.8c0,0,0,0,0,0c2.2,0,4.3-0.7,5.9-2l6.8,6.8l2.1-2.1L49.1,41.1z M17,11c0-0.5,0.4-1,1-1h10
                	c0.5,0,1,0.4,1,1v2H17V11z M38,50H8V13h6v3h18v-3h6v12.6c-4,1.3-7,5.1-7,9.5c0,4.5,2.9,8.3,7,9.5V50z M41,42.2c-3.9,0-7-3.1-7-7
                	c0-3.9,3.1-7,7-7c2,0,3.8,0.8,5,2.1L41,35.4l-3.7-3.7l-2.1,2.1l5.8,5.8l6.7-6.7c0.2,0.7,0.4,1.4,0.4,2.2C48,39,44.9,42.2,41,42.2z
                	 M11.5,23H30v-3H11.5V23z M11.5,31h14v-3h-14V31z M11.5,39H22v-3H11.5V39z"/>
                </svg>
                <p>예약내역</p>
            </div>
        </div>
        <div class="piece">
            <div class="btn">
                <svg  x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path class="st0" d="M51.4,6H24.3c-2.5,0-4.5,2-4.5,4.5v9.2H8.5c-2.5,0-4.5,2-4.5,4.5v19.2c0,2.5,2,4.5,4.5,4.5h1.7v6.1
                	c0,0.8,0.7,1.5,1.5,1.5c0.4,0,0.8-0.2,1.1-0.4l7.2-7.2h14.2c2.5,0,4.5-2,4.5-4.5v-6l7.1,7.1c0.4,0.4,1.1,0.6,1.6,0.3
                	c0.6-0.2,0.9-0.8,0.9-1.4v-6.1h3.1c2.5,0,4.5-2,4.5-4.5V10.5C55.9,8,53.9,6,51.4,6z M35.7,43.3c0,0.8-0.7,1.5-1.5,1.5H19.3
                	c-0.4,0-0.8,0.2-1.1,0.4l-5,5v-4c0-0.8-0.7-1.5-1.5-1.5H8.5c-0.8,0-1.5-0.7-1.5-1.5V24.2c0-0.8,0.7-1.5,1.5-1.5h11.3v10
                	c0,2.5,2,4.5,4.5,4.5h11.3V43.3z M51.4,34.2h-4.6c-0.8,0-1.5,0.7-1.5,1.5v4l-5-5c-0.3-0.3-0.7-0.4-1.1-0.4H24.3
                	c-0.8,0-1.5-0.7-1.5-1.5V10.5c0-0.8,0.7-1.5,1.5-1.5h27.1c0.8,0,1.5,0.7,1.5,1.5v22.2h0C52.9,33.5,52.2,34.2,51.4,34.2z M30.3,19.2
                	L30.3,19.2c-1.3,0-2.3,1-2.4,2.3c0,1.3,1,2.3,2.3,2.4c0,0,0.1,0,0.1,0c1.3,0,2.3-1.1,2.3-2.4C32.5,20.3,31.5,19.3,30.3,19.2z
                	 M37.9,19.2L37.9,19.2c-1.3,0-2.3,1-2.4,2.3c0,1.3,1,2.3,2.3,2.4c0,0,0.1,0,0.1,0c1.3,0,2.3-1.1,2.3-2.4
                	C40.1,20.3,39.1,19.3,37.9,19.2z M45.5,19.2L45.5,19.2c-1.3,0-2.3,1-2.4,2.3c0,1.3,1,2.3,2.3,2.4c0,0,0.1,0,0.1,0
                	c1.3,0,2.3-1.1,2.3-2.4C47.7,20.3,46.7,19.3,45.5,19.2z"/>
                </svg>
                <p>1:1상담</p>
            </div>
        </div>
        <div class="piece">
            <div class="btn">
                <svg  x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path class="st0" d="M6.5,24.4L3,29.9l3.5,5.4L9,33.7l-2.5-3.8L9,26.1L6.5,24.4z M54,24.4l-2.5,1.6l2.5,3.8l-2.5,3.8l2.5,1.6
                	l3.5-5.4L54,24.4z M35.5,5H25.4C21.3,5,18,8.3,18,12.4v34.9c0,4.1,3.3,7.4,7.4,7.4h10.1c4.1,0,7.4-3.3,7.4-7.4V12.4
                	C42.9,8.3,39.6,5,35.5,5z M25.2,51.7c-2.4-0.1-4.3-2-4.3-4.4V12.4c0-2.4,1.9-4.3,4.3-4.4V51.7z M32.6,51.7h-4.4V8h4.4V51.7z
                	 M39.9,47.3c0,2.4-1.9,4.3-4.3,4.4V8c2.4,0.1,4.3,2,4.3,4.4V47.3z"/>
                </svg>
                <p>라인업</p>
            </div>
        </div>
        <div class="piece">
            <div class="btn">
                <svg  x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path class="st0" d="M6.5,24.4L3,29.9l3.5,5.4L9,33.7l-2.5-3.8L9,26.1L6.5,24.4z M54,24.4l-2.5,1.6l2.5,3.8l-2.5,3.8l2.5,1.6
                	l3.5-5.4L54,24.4z M35.5,5H25.4C21.3,5,18,8.3,18,12.4v34.9c0,4.1,3.3,7.4,7.4,7.4h10.1c4.1,0,7.4-3.3,7.4-7.4V12.4
                	C42.9,8.3,39.6,5,35.5,5z M25.2,51.7c-2.4-0.1-4.3-2-4.3-4.4V12.4c0-2.4,1.9-4.3,4.3-4.4V51.7z M32.6,51.7h-4.4V8h4.4V51.7z
                	 M39.9,47.3c0,2.4-1.9,4.3-4.3,4.4V8c2.4,0.1,4.3,2,4.3,4.4V47.3z"/>
                </svg>
                <p>최근본상품</p>
            </div>
        </div>
        <div class="piece">
            <div class="btn">
                <svg  x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path d="M24.5,27.5h-3v6h3V27.5z M35.5,33.5h3v-6h-3V33.5z M24.9,40.3l-1.9,2.3C25,44.2,27.5,45,30,45c2.5,0,5-0.8,6.9-2.3l-1.9-2.3
                	C32.3,42.5,27.7,42.5,24.9,40.3z M50,23h-0.5v-8.1c0-5.3-4.3-9.6-9.6-9.6h-2.2c-1.9-2-4.6-3.3-7.6-3.3H14.9c-2.4,0-4.4,2-4.4,4.4V23
                	H10c-3,0-5.5,2.5-5.5,5.5v8c0,3,2.5,5.5,5.5,5.5h2.6c0.7,6.3,5.8,11.3,12.1,11.9c0.6,2.3,2.8,4.1,5.3,4.1c2.5,0,4.6-1.7,5.3-4h7
                	c7.3,0,13.2-5.9,13.2-13.2v-4.3v-4v-4C55.5,25.5,53,23,50,23z M12.5,39H10c-1.4,0-2.5-1.1-2.5-2.5v-8c0-1.4,1.1-2.5,2.5-2.5h2.5V39z
                	 M13.5,20.8V6.4c0-0.8,0.6-1.4,1.4-1.4h15.3c4,0,7.3,3.3,7.3,7.3v1.8h3v-1.8c0-1.4-0.3-2.8-0.8-4h0.2c3.6,0,6.6,3,6.6,6.6v5.9
                	C45.2,18.5,42.8,17,40,17H20C17.2,17,14.8,18.5,13.5,20.8z M30,55c-1.4,0-2.5-1.1-2.5-2.5c0-1.4,1.1-2.5,2.5-2.5
                	c1.4,0,2.5,1.1,2.5,2.5S31.4,55,30,55z M35.3,50.9C34.6,48.7,32.5,47,30,47s-4.6,1.7-5.3,3.9c-5.2-0.6-9.2-5.1-9.2-10.4v-16
                	c0-2.5,2-4.5,4.5-4.5h20c2.5,0,4.5,2,4.5,4.5v16C44.5,45.9,40.5,50.3,35.3,50.9z M42.5,51c2.7-2.2,4.5-5.4,4.9-9H50
                	c0.9,0,1.7-0.2,2.5-0.6C52.1,46.7,47.8,50.9,42.5,51z M52.5,32.5v4c0,1.4-1.1,2.5-2.5,2.5h-2.5V26H50c1.4,0,2.5,1.1,2.5,2.5V32.5z"/>
                </svg>
                <p>고객상담</p>
            </div>
        </div>
        <div class="piece">
            <div class="btn">
                <svg  x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path d="M18.5,21.4c0.5,0.1,1,0.1,1.5,0.1c3.1,0,6-1.5,7.7-4l17.3,0L50,12l-4.9-5.5l-17.3,0c-1.8-2.5-4.7-4-7.7-4
                	c-2.7,0-5.3,1.2-7.1,3.2c-1.8,2-2.7,4.7-2.4,7.4C11,17.2,14.4,20.7,18.5,21.4z M15.2,7.7c1.2-1.4,3-2.2,4.8-2.2h0
                	c2.3,0,4.5,1.2,5.6,3.2l0.4,0.7l17.7,0L46,12l-2.2,2.5l-2.2,0V12h-3v2.5l-4,0V12h-3v2.5l-5.4,0l-0.4,0.7c-1.4,2.3-4,3.6-6.7,3.2
                	c-2.8-0.4-5.1-2.8-5.4-5.7C13.3,10.9,13.9,9.1,15.2,7.7z M48.8,35.5l-6-10H17.2l-6,10H5v3h3.5V53c0,2.5,2,4.5,4.5,4.5h5
                	c2.5,0,4.5-2,4.5-4.5v-1.5h15V53c0,2.5,2,4.5,4.5,4.5h5c2.5,0,4.5-2,4.5-4.5V38.5H55v-3H48.8z M18.8,28.5h22.3l4.5,7.4l-2.8,0.6
                	H17.1l-2.8-0.6L18.8,28.5z M48.5,53c0,0.8-0.7,1.5-1.5,1.5h-5c-0.8,0-1.5-0.7-1.5-1.5v-4.5h-21V53c0,0.8-0.7,1.5-1.5,1.5h-5
                	c-0.8,0-1.5-0.7-1.5-1.5V39.6l1-1l4.2,0.8l26.4,0l4.4-0.9l1,1V53z M15,45.5h6v-3h-6V45.5z M39,45.5h6v-3h-6V45.5z"/>
                </svg>
                <p>마이페이지</p>
            </div>
        </div>
        <div class="piece">
            <div class="btn">
                <svg x="0px" y="0px" viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
                    <path d="M24.5,3c1.7,0,3.4,0.7,4.6,1.9C31.7,3.7,34.6,3,37.5,3C48.3,3,57,11.7,57,22.5S48.3,42,37.5,42c-2.3,0-4.5-0.4-6.5-1.1v10.6
                	c0,3.6-2.9,6.5-6.5,6.5h-15C5.9,58,3,55.1,3,51.5v-42C3,5.9,5.9,3,9.5,3H24.5z M28,43.9l-7,4V55h3.5c1.9,0,3.5-1.6,3.5-3.5V43.9z
                	 M6,43.9v7.6C6,53.4,7.6,55,9.5,55H13v-7.1C13,47.9,6,43.9,6,43.9z M18,6h-2v49h2V6z M21.5,33.6L21,33.9v10.5l7-4v-0.9
                	C25.4,38.1,23.2,36.1,21.5,33.6z M6,29.9v10.5l7,4V33.9L6,29.9z M37.5,6C28.4,6,21,13.4,21,22.5S28.4,39,37.5,39
                	c6,0,11.2-3.2,14.1-7.9H39.3v-2.8h-2v3.5l-7.7,2.6V24h-6.1v-3h6.1V10.6l7.7,2.6v3.5h2v-2.8h12.3C48.7,9.2,43.5,6,37.5,6z M6,15.9
                	v10.5l7,4V19.9L6,15.9z M34.2,28.3h-1.7v1.9l1.7-0.6C34.2,29.7,34.2,28.3,34.2,28.3z M53,16.9H42.3v11.1h2.2v-1.8h2v1.8h2.8v-3.5h2
                	v3.5H53c0.6-1.7,1-3.6,1-5.6S53.6,18.7,53,16.9z M39.3,19.7h-6.7v5.6h6.7V19.7z M32.5,14.8v1.9h1.7v-1.4L32.5,14.8z M13,6H9.5
                	C7.6,6,6,7.6,6,9.5v2.9l7,4V6z M24.5,6H21v6.2c1.4-2.2,3.2-4.1,5.3-5.6C25.8,6.2,25.1,6,24.5,6z"/>
                </svg>
                <p>마모도측정</p>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;
            navigator.vibrate(0);

            var pointer = document.getElementById("pointer"),
                pieces = pointer.querySelectorAll(".piece"),
                pointerBox = pointer.getBoundingClientRect(),
                centerPoint = window.getComputedStyle(pointer).transformOrigin,
                centers = centerPoint.split(" ");
            
            var centerY = pointerBox.top + parseInt(centers[1]) - window.pageYOffset,
                centerX = pointerBox.left + parseInt(centers[0]) - window.pageXOffset;

            var totalDegrees = 0;
            var startDegrees = 0;
            var lastDegrees = 0;
            var currentDegrees = 0;
            var target = null;
            var dragging = false;
            var startTime = 0;
            var endTime = 0;
            var targetDegrees = 0;
            var lastVelocity = 0;
            var easingStartDegree = 0;
            var direction;
            
            var animationId = null;

            animationId = requestAnimationFrame(update);

            function calcDegrees(e) {
                var pointerEvent = e;
                if (e.targetTouches && e.targetTouches[0]) {
                    e.preventDefault();
                    pointerEvent = e.targetTouches[0];
                    mouseX = pointerEvent.pageX;
                    mouseY = pointerEvent.pageY;
                } else {
                    mouseX = e.clientX,
                    mouseY = e.clientY;
                }

                var radians = Math.atan2(mouseX - centerX, mouseY - centerY);
                var degrees = (radians * (180 / Math.PI) * -1) + 180;
                return degrees;
            }

            function calcEndDegrees(e) {
                var pointerEvent = e;
                if (e.changedTouches && e.changedTouches[e.changedTouches.length-1]) {
                    e.preventDefault();
                    pointerEvent = e.changedTouches[e.changedTouches.length-1];
                    mouseX = pointerEvent.pageX;
                    mouseY = pointerEvent.pageY;
                } else {
                    mouseX = e.clientX,
                    mouseY = e.clientY;
                }

                var radians = Math.atan2(mouseX - centerX, mouseY - centerY);
                var degrees = (radians * (180 / Math.PI) * -1) + 180;
                return degrees;
            }


            function onStart(e) {
                // if (target)
                //     return;
                dragging = true;

                target = e.currentTarget;
                
                startTime = Date.now() / 1000;

                startDegrees = calcDegrees(e);
                currentDegrees = startDegrees;

                target.style.transition = 'none';
                target.style.willChange = 'transform';

                for(var i = 0; i < pieces.length; i++){
                    pieces[i].querySelector(".btn").style.transition = "none";
                    pieces[i].querySelector(".btn").style.willChange = 'transform';
                }

                animationId = requestAnimationFrame(update);
            }

            function onMove(e) {
                // if (!target)
                //     return;
                dragging = true;
                currentDegrees = calcDegrees(e);
            }

            function onEnd(e) {
                
                // if (!target)
                //     return;
                targetDegrees = 0;
                endTime = Date.now() / 1000;
                //console.log(endTime);
 
                dragging = false;

                //targetDegrees = Math.round( Math.round(totalDegrees % 360) / 45 ) * 45;
                targetDegrees = Math.round( Math.round(totalDegrees) / 45 ) * 45;
            }


            var start = null;
            var frameCount = 0;
            var justBeforeDegrees = 0;

            function update(timestamp) {

                animationId = requestAnimationFrame(update);

                if (!target)
                    return;

                if (dragging) {
                    totalDegrees = lastDegrees + (currentDegrees - startDegrees);

                    
                    if(Math.abs(justBeforeDegrees - currentDegrees) > 0.5){
                        navigator.vibrate(10000);
                    }else{
                        navigator.vibrate(0);
                    }

                    justBeforeDegrees = currentDegrees;
                    
                } else {
                    navigator.vibrate(0);

                    if(!start) {
                        start = timestamp;
                    }
                    
                    if(frameCount < 6){
                        frameCount++;
                    }

                    if(frameCount == 6){
                        cancelAnimationFrame(animationId);
                    }


                    relativeDegrees = Math.abs(totalDegrees - targetDegrees);

                    if(totalDegrees > targetDegrees) {
                        direction = -1;
                        totalDegrees = totalDegrees + (direction * relativeDegrees);
                    }else{
                        direction = 1;
                        totalDegrees = totalDegrees + (direction * relativeDegrees);
                    }

                    

                    target.style.transition = "all 0.2s";

                    target.addEventListener('transitionend', function() {
                        cancelAnimationFrame(animationId);
                        activeBtn(targetDegrees);
                        target.removeEventListener('transitionend', arguments.callee);
                    });

                    for(var i = 0; i < pieces.length; i++){
                        pieces[i].querySelector(".btn").style.transition = "all 0.2s";
                    }

                    //console.log(relativeDegrees);
                    //targetDegrees = Math.round( Math.round(easingStartDegree) / 45 ) * 45;

                    //totalDegrees += (targetDegrees - totalDegrees) * 0.1;

                }

                target.style.transform = 'rotate(' + totalDegrees + 'deg)';
                initBtnDegrees(totalDegrees);

                
                

                // User has finished dragging.
                if (dragging)
                    return;

                lastDegrees = totalDegrees % 360;

            }

            //pointer.addEventListener('mousemove', rotatePointer);
            pointer.addEventListener('touchend', onEnd);
            pointer.addEventListener('touchmove', onMove);
            pointer.addEventListener('touchstart', onStart);

            initBtnDegrees(0);
            pieces[0].querySelector(".btn").classList.add("act");

            function initBtnDegrees(parentDegrees) {
                for (var i = 0; i < pieces.length; i++) {
                    pieces[i].querySelector(".btn").style.transform = 'translateX(-50%) translateY(-50%) rotate(' + -1 * (parentDegrees + (i * 45)) + 'deg)';
                }
                
            }

            function activeBtn(targetDegrees) {
                inactiveBtn();

                var trackingNumber = (targetDegrees/45) % 8;
                console.log(trackingNumber);
                if(trackingNumber == 0 || trackingNumber == -0){pieces[0].querySelector(".btn").classList.add("act");}
                else if(trackingNumber == 1 || trackingNumber == -7){pieces[7].querySelector(".btn").classList.add("act");}
                else if(trackingNumber == 2 || trackingNumber == -6){pieces[6].querySelector(".btn").classList.add("act");}
                else if(trackingNumber == 3 || trackingNumber == -5){pieces[5].querySelector(".btn").classList.add("act");}
                else if(trackingNumber == 4 || trackingNumber == -4){pieces[4].querySelector(".btn").classList.add("act");}
                else if(trackingNumber == 5 || trackingNumber == -3){pieces[3].querySelector(".btn").classList.add("act");}
                else if(trackingNumber == 6 || trackingNumber == -2){pieces[2].querySelector(".btn").classList.add("act");}
                else if(trackingNumber == 7 || trackingNumber == -1){pieces[1].querySelector(".btn").classList.add("act");}
                        
            }

            function inactiveBtn() {
                for (var i = 0; i < pieces.length; i++) {
                    pieces[i].querySelector(".btn").classList.remove("act");
                }
            }
        })



        







        function easeOutCubic(currTime, beginningValue, change, duration) {
            return change * ((currTime = currTime / duration - 1) * currTime * currTime + 1) + beginningValue;
        }

        





        class Cards {
            constructor() {
                this.cards = Array.from(document.querySelectorAll('.card'));

                this.onStart = this.onStart.bind(this);
                this.onMove = this.onMove.bind(this);
                this.onEnd = this.onEnd.bind(this);
                this.update = this.update.bind(this);
                this.targetBCR = null;
                this.target = null;
                this.startX = 0;
                this.startTime = 0;
                this.endTime = 0;
                this.currentX = 0;
                this.screenX = 0;
                this.targetX = 0;
                this.lastVelocity = 0;
                this.draggingCard = false;

                this.addEventListeners();

                requestAnimationFrame(this.update);
            }

            addEventListeners() {
                document.addEventListener('touchstart', this.onStart);
                document.addEventListener('touchmove', this.onMove);
                document.addEventListener('touchend', this.onEnd);

                document.addEventListener('mousedown', this.onStart);
                document.addEventListener('mousemove', this.onMove);
                document.addEventListener('mouseup', this.onEnd);
            }

            onStart(evt) {
                if (this.target)
                    return;

                if (!evt.target.classList.contains('card'))
                    return;

                this.target = evt.target;
                this.targetBCR = this.target.getBoundingClientRect();

                this.startX = evt.pageX || evt.touches[0].pageX;
                this.startTime = Date.now() / 1000;
                this.currentX = this.startX;

                this.draggingCard = true;
                this.target.style.willChange = 'transform';

                evt.preventDefault();
            }

            onMove(evt) {
                if (!this.target)
                    return;

                this.currentX = evt.pageX || evt.touches[0].pageX;
            }

            onEnd(evt) {
                if (!this.target)
                    return;

                this.targetX = 0;
                this.endTime = Date.now() / 1000;
                let screenX = this.currentX - this.startX;
                const threshold = this.targetBCR.width * 0.35;
                if (Math.abs(screenX) > threshold) {
                    this.targetX = (screenX > 0) ?
                        this.targetBCR.width :
                        -this.targetBCR.width;
                }

                this.draggingCard = false;

                // calculate velocity
                //this.lastVelocity = (evt.pageX - this.startX) / (this.endTime - this.startTime);
                //console.log(this.lastVelocity);
            }

            update() {

                requestAnimationFrame(this.update);

                if (!this.target)
                    return;

                if (this.draggingCard) {
                    this.screenX = this.currentX - this.startX;
                } else {
                    this.screenX += this.lastVelocity / 20; // change the number 20 to change the velocity applied to animation
                }


                const normalizedDragDistance =
                    (Math.abs(this.screenX) / this.targetBCR.width);
                const opacity = 1 - Math.pow(normalizedDragDistance, 3);

                this.target.style.transform = `translateX(${this.screenX}px)`;
                this.target.style.opacity = opacity;

                // User has finished dragging.
                if (this.draggingCard)
                    return;

                const isNearlyAtStart = (Math.abs(this.screenX) < 0.1);
                const isNearlyInvisible = (opacity < 0.01);

                // If the card is nearly gone.
                if (isNearlyInvisible) {

                    // Bail if there's no target or it's not attached to a parent anymore.
                    if (!this.target || !this.target.parentNode)
                        return;

                    this.target.parentNode.removeChild(this.target);

                    const targetIndex = this.cards.indexOf(this.target);
                    this.cards.splice(targetIndex, 1);

                    // Slide all the other cards.
                    this.animateOtherCardsIntoPosition(targetIndex);

                } else if (isNearlyAtStart) {
                    this.resetTarget();
                }
            }

            animateOtherCardsIntoPosition(startIndex) {
                // If removed card was the last one, there is nothing to animate.
                // Remove the target.
                if (startIndex === this.cards.length) {
                    this.resetTarget();
                    return;
                }

                const onAnimationComplete = evt => {
                    const card = evt.target;
                    card.removeEventListener('transitionend', onAnimationComplete);
                    card.style.transition = '';
                    card.style.transform = '';

                    this.resetTarget();
                };

                // Set up all the card animations.
                for (let i = startIndex; i < this.cards.length; i++) {
                    const card = this.cards[i];

                    // Move the card down then slide it up.
                    card.style.transform = `translateY(${this.targetBCR.height + 20}px)`;
                    card.addEventListener('transitionend', onAnimationComplete);
                }

                // Now init them.
                requestAnimationFrame(_ => {
                    for (let i = startIndex; i < this.cards.length; i++) {
                        const card = this.cards[i];

                        // Move the card down then slide it up, with delay according to "distance"
                        card.style.transition = `transform 150ms cubic-bezier(0,0,0.31,1) ${i * 50}ms`;
                        card.style.transform = '';
                    }
                });
            }

            resetTarget() {
                if (!this.target)
                    return;

                this.target.style.willChange = 'initial';
                this.target.style.transform = 'none';
                this.target = null;
            }
        }

        window.addEventListener('load', () => new Cards());
    </script>
</body>
</html>
